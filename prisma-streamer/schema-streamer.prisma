generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/@internal-streamer/prisma/client"
}

datasource db {
  provider          = "postgresql"
  url               = env("NEAR_STREAMER_SQL_DATABASE_URL")
  shadowDatabaseUrl = env("NEAR_STREAMER_SHADOW_DATABASE_URL")
}

model receipt {
  receipt_id        String @id
  receipt           Json
  execution_outcome Json
}

model transaction {
  hash               String  @id
  outcome            Json
  transaction        Json
  missing            Boolean @default(false)
  processed          Boolean @default(false)
  block_hash         String
  block_height       BigInt
  block_timestamp    BigInt
  success_receipt_id String?
  receiver_id        String?

  @@index([receiver_id])
  @@index([success_receipt_id])
}
